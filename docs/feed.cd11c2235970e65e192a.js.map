{"version":3,"sources":["webpack:///./src/lazy.js","webpack:///./src/with-huge.tsx","webpack:///./src/feed.tsx"],"names":["debouncedPromisesCache","Map","WithHuge","hugeSize","setHugeSize","cacheKey","promiseFn","timeout","has","get","promise","Promise","resolve","reject","window","addEventListener","setTimeout","then","once","set","debouncePromiseOnLoad","huge","length","style","backgroundColor","className","console","log","render","from","onClick","document","getElementById"],"mappings":"8IAAMA,EAAyB,IAAIC,ICGpB,SAASC,EAAS,GAAM,O,IAC/B,EAA0B,mBAAS,GAAlCC,EAAQ,KAAEC,EAAW,KAU5B,OARA,qBAAU,YDKL,SAA+BC,EAAUC,GAAwB,IAAbC,EAAa,uDAAH,EACnE,GAAIP,EAAuBQ,IAAIH,GAC7B,OAAOL,EAAuBS,IAAIJ,GAGpC,IAAMK,EAAU,IAAIC,SAAQ,SAACC,EAASC,GACpCC,OAAOC,iBAAiB,QACtB,WACEC,YAAW,WACTV,IAAYW,KAAKL,EAASC,KACzBN,KAEL,CAAEW,MAAM,OAMZ,OAFAlB,EAAuBmB,IAAId,EAAUK,GAE9BA,GCtBLU,CAAsB,QACpB,WAAM,uCAGNH,MAAK,SAAC,G,IAAWI,EAAI,UAAO,OAAAjB,EAAYiB,EAAKC,aAC9C,IAGD,0BAAMC,MAAO,CAAEC,gBAAiB,kBAC9B,+BAAQ,6LAYLrB,EAEG,8B,sBAA0BA,GAD1B,0BAAMsB,UAAU,SAAO,yB,+BC7BnC,kDAIAC,QAAQC,IAAI,aAEZ,IAASC,OAAO,mBAEhB,WACE,OACE,yBAAKL,MAAO,CAAEC,gBAAiB,c,QACxB,kBAAC,IAAQ,CAACK,KAAK,SACpB,4BAAQC,QAAS,WAAQJ,QAAQC,IAAI,aAAa,gCANnC,MAAKI,SAASC,eAAe,W","file":"feed.cd11c2235970e65e192a.js","sourcesContent":["const debouncedPromisesCache = new Map();\n\n/**\n * Defers execution of promiseFn to some time after the window load event and caches the returned promise. \n * Can be used for lazy-loading using dynamic import\n * @param {string} cacheKey - The name for the cache entry.\n * @param {() => Promise} promiseFn - A function that returns a promise. It will only be executed once.\n * @param {timeout} [timeout = 0] - A timeout after the load event, after which the promiseFn will be executed.\n * @return {Promise}\n * \n */\nexport function debouncePromiseOnLoad(cacheKey, promiseFn, timeout = 0) {\n  if (debouncedPromisesCache.has(cacheKey)) {\n    return debouncedPromisesCache.get(cacheKey);\n  }\n\n  const promise = new Promise((resolve, reject) => {\n    window.addEventListener(\"load\",\n      () => {\n        setTimeout(() => {\n          promiseFn().then(resolve, reject);\n        }, timeout);\n      },\n      { once: true }\n    );\n  });\n\n  debouncedPromisesCache.set(cacheKey, promise);\n\n  return promise;\n}\n\n","import React, { useEffect, useState } from \"react\";\nimport { debouncePromiseOnLoad } from \"./lazy\";\n\nexport default function WithHuge({ from }: { from: string; }) {\n  const [hugeSize, setHugeSize] = useState(0);\n\n  useEffect(() => {\n    debouncePromiseOnLoad(\"huge\",\n      () => import(\n        /* webpackChunkName: \"huge\" */\n        \"./huge\")\n    ).then(({ default: huge }) => setHugeSize(huge.length));\n  }, []);\n\n  return (\n    <span style={{ backgroundColor: \"paleturquoise\" }}>\n      <style>{`\n        .blink {\n          animation: blinker 1s linear infinite;\n        }\n\n        @keyframes blinker {\n          50% {\n            opacity: 0;\n          }\n        }\n      `}</style>\n      {\n        !hugeSize\n          ? <span className=\"blink\">Huge is loading...</span>\n          : <span>Huge loaded. Size: {hugeSize}</span>\n      }\n    </span>);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport WithHuge from './with-huge';\n\nconsole.log(\"init feed\");\n\nReactDOM.render(<Feed />, document.getElementById(\"feed\"));\n\nfunction Feed() {\n  return (\n    <div style={{ backgroundColor: \"palegreen\" }}>\n      FEED <WithHuge from=\"feed\" />\n      <button onClick={() => { console.log(\"clicked\"); }}>Click me and see console!</button>\n    </div>\n  );\n}"],"sourceRoot":""}